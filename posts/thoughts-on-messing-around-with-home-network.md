最近一段时间，我给家里的网络做升级。在网上查找资料的过程中，我发现了一些特别的现象。

网络上，家庭网络相关的生态非常繁荣。硬件方面有各种形态的迷你主机作为路由器或者 NAS；软件方面有各种各样的 OpenWrt 的衍生系统和 NAS 系统。同时，也有很多关于搭建家庭网络的“教程”。

然而很多教程的编写者并不具备网络相关的专业背景，其文章中存在着许多关键错误。例如，有些文章在介绍“旁路由”的设置时，提到了“网关互指”的方法：“主路由”和“旁路由”相互设置对方为自己的默认网关。这明显是错误的做法，它会造成发往公网的数据包在两个路由器之间回环，直到转发次数耗尽。我经过一些检索后发现，所谓的“网关互指”原义是让“主路由”中的 DHCP 服务器下发的默认网关为“旁路由”的 IP 地址，“旁路由”的默认网关设置为“主路由”。这样所有局域网内的设备都会把发往公网的数据包先发给“旁路由”，然后再由“旁路由”发往“主路由”。

还有一些文章在介绍“软路由”时，竟然专门介绍如何安装配置 Free Range Routing (FRR)，并标榜其为“硬核方案”。FRR 是一个开源路由协议套件，一般用在核心网路由等复杂场景。在家用网络中使用 FRR 不仅起不到太大作用，反而增加了系统的复杂度。

我终于理解为什么很多人把搭建家庭网络称为“折腾”。参考这些存在错误的“教程”来搭建家庭网络，可不就是在折腾吗？

不过仔细想想，出现这种现象也并不奇怪。上网本身是一件很有趣的事情，而搭建家庭网络作为其中的一项基础设施，往往比上网本身带来更多的乐趣。看着测速软件跑满带宽、广告自动拦截、数据包按需代理等，心里就会有强烈的成就感。所以很多非专业人士也会以娱乐的心态加入进来，而这其中也会出现不少愿意把成功的经验分享出来的人。但是这对一些爱好者也造成了一些麻烦，他们经常在众多的错误方法中反复“折腾”。由于缺乏一些基础的理论知识，大部分爱好者也很难在“折腾”的过程中构建正确的网络知识体系。

于是，我打算写一个系列文章，向业余爱好者普及计算机网络知识。希望这些网络爱好者们阅读完这些文章后，能学到一些网络通讯的基础知识。在“折腾”家庭网络的过程中，能够知其然和所以然，同时收获更多乐趣。